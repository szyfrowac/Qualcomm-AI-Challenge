import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{onMount as Z,onDestroy as ue,createEventDispatcher as de,afterUpdate as Te,tick as Le}from"./svelte/svelte_svelte.js";import{I as le,i as ce,a0 as Ve,a as De,t as Pe,_ as Me,d as Re,r as ie,E as Se,e as Ie,n as qe,D as Ae}from"./ScrollFade-Z5OOjlGL.js";import{S as Ce}from"./ShareButton-803mPI0v.js";import"./i18n-B4hKvn1K.js";import{f as J,u as Be}from"./utils.svelte-kG009vb9.js";import{b as Xe,t as Fe,V as He}from"./Video-BrnW2L40.js";import{M as Ue}from"./ModifyUpload-DNtVAL0c.js";import{V as je}from"./VolumeLevels-Bj618cFW.js";import{p as Oe}from"./index-B5Zu_GVg.js";var ze=e.from_html('<div class="load-wrap svelte-mctcyk"><span aria-label="loading timeline" class="loader svelte-mctcyk"></span></div>'),Ne=e.from_html('<img draggable="false" class="svelte-mctcyk"/>'),We=e.from_html('<div id="timeline" class="thumbnail-wrapper svelte-mctcyk"><button aria-label="start drag handle for trimming video" class="handle left svelte-mctcyk"></button> <div class="opaque-layer svelte-mctcyk"></div> <!> <button aria-label="end drag handle for trimming video" class="handle right svelte-mctcyk"></button></div>'),Ge=e.from_html('<div class="container svelte-mctcyk"><!></div>');function Je(U,l){e.push(l,!1);let a=e.prop(l,"videoElement",12),m=e.prop(l,"trimmedDuration",12),E=e.prop(l,"dragStart",12),u=e.prop(l,"dragEnd",12),V=e.prop(l,"loadingTimeline",12),d=e.mutable_source([]),i=10,x,v=e.mutable_source(0),h=e.mutable_source(100),T=null;const M=t=>{T=t},S=()=>{T=null},p=(t,n)=>{if(T){const f=document.getElementById("timeline");if(!f)return;const _=f.getBoundingClientRect();let y=(t.clientX-_.left)/_.width*100;if(n?y=T==="left"?e.get(v)+n:e.get(h)+n:y=(t.clientX-_.left)/_.width*100,y=Math.max(0,Math.min(y,100)),T==="left"){e.set(v,Math.min(y,e.get(h)));const g=e.get(v)/100*x;a(a().currentTime=g,!0),E(g)}else if(T==="right"){e.set(h,Math.max(y,e.get(v)));const g=e.get(h)/100*x;a(a().currentTime=g,!0),u(g)}const k=e.get(v)/100*x,D=e.get(h)/100*x;m(D-k),e.set(v,e.get(v)),e.set(h,e.get(h))}},C=t=>{if(T){const n=1/x*100;t.key==="ArrowLeft"?p({clientX:0},-n):t.key==="ArrowRight"&&p({clientX:0},n)}},B=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)return;t.width=a().videoWidth,t.height=a().videoHeight,n.drawImage(a(),0,0,t.width,t.height);const f=t.toDataURL("image/jpeg",.7);e.set(d,[...e.get(d),f])};Z(()=>{const t=()=>{x=a().duration;const n=x/i;let f=0;const _=()=>{B(),f++,f<i?a(a().currentTime+=n,!0):a().removeEventListener("seeked",_)};a().addEventListener("seeked",_),a(a().currentTime=0,!0)};a().readyState>=1?t():a().addEventListener("loadedmetadata",t)}),ue(()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",S),window.removeEventListener("keydown",C)}),Z(()=>{window.addEventListener("mousemove",p),window.addEventListener("mouseup",S),window.addEventListener("keydown",C)}),e.legacy_pre_effect(()=>e.get(d),()=>{V(e.get(d).length!==i)}),e.legacy_pre_effect_reset();var A={get videoElement(){return a()},set videoElement(t){a(t),e.flush()},get trimmedDuration(){return m()},set trimmedDuration(t){m(t),e.flush()},get dragStart(){return E()},set dragStart(t){E(t),e.flush()},get dragEnd(){return u()},set dragEnd(t){u(t),e.flush()},get loadingTimeline(){return V()},set loadingTimeline(t){V(t),e.flush()}};e.init();var I=Ge(),O=e.child(I);{var b=t=>{var n=ze();e.append(t,n)},w=t=>{var n=We(),f=e.child(n),_=e.sibling(f,2),y=e.sibling(_,2);e.each(y,1,()=>e.get(d),e.index,(D,g,o)=>{var L=Ne();e.set_attribute(L,"alt",`frame-${o}`),e.template_effect(()=>e.set_attribute(L,"src",e.get(g))),e.append(D,L)});var k=e.sibling(y,2);e.reset(n),e.template_effect(()=>{e.set_style(f,`left: ${e.get(v)??""}%;`),e.set_style(_,`left: ${e.get(v)??""}%; right: ${100-e.get(h)}%`),e.set_style(k,`left: ${e.get(h)??""}%;`)}),e.event("mousedown",f,()=>M("left")),e.event("blur",f,S),e.event("keydown",f,D=>{(D.key==="ArrowLeft"||D.key=="ArrowRight")&&M("left")}),e.event("mousedown",k,()=>M("right")),e.event("blur",k,S),e.event("keydown",k,D=>{(D.key==="ArrowLeft"||D.key=="ArrowRight")&&M("right")}),e.append(t,n)};e.if(O,t=>{V()?t(b):t(w,!1)})}return e.reset(I),e.append(U,I),e.pop(A)}var Ke=e.from_html('<div class="timeline-wrapper svelte-1orxdv"><!></div>'),Qe=e.from_html('<time aria-label="duration of selected region in seconds"> </time> <div class="edit-buttons svelte-1orxdv"><button>Trim</button> <button>Cancel</button></div>',1),Ye=e.from_html('<div class="svelte-1orxdv"></div>'),Ze=e.from_html("<!> <!>",1),$e=e.from_html('<div><!> <div class="controls svelte-1orxdv" data-testid="waveform-controls"><!></div></div> <!>',1);function et(U,l){e.push(l,!1);let a=e.prop(l,"videoElement",12),m=e.prop(l,"showRedo",12,!1),E=e.prop(l,"interactive",12,!0),u=e.prop(l,"mode",12,""),V=e.prop(l,"handle_reset_value",12),d=e.prop(l,"handle_trim_video",12),i=e.prop(l,"processingVideo",12,!1),x=e.prop(l,"i18n",12),v=e.prop(l,"value",12,null),h=e.prop(l,"show_download_button",12,!1),T=e.prop(l,"handle_clear",12,()=>{}),M=e.prop(l,"has_change_history",12,!1),S=e.mutable_source();Z(async()=>{e.set(S,await Xe())});let p=e.mutable_source(null),C=e.mutable_source(0),B=e.mutable_source(0),A=e.mutable_source(!1);const I=()=>{u()==="edit"?(u(""),e.set(p,a().duration)):u("edit")};e.legacy_pre_effect(()=>(e.deep_read_state(u()),e.get(p),e.deep_read_state(a())),()=>{u()==="edit"&&e.get(p)===null&&a()&&e.set(p,a().duration)}),e.legacy_pre_effect_reset();var O={get videoElement(){return a()},set videoElement(o){a(o),e.flush()},get showRedo(){return m()},set showRedo(o){m(o),e.flush()},get interactive(){return E()},set interactive(o){E(o),e.flush()},get mode(){return u()},set mode(o){u(o),e.flush()},get handle_reset_value(){return V()},set handle_reset_value(o){V(o),e.flush()},get handle_trim_video(){return d()},set handle_trim_video(o){d(o),e.flush()},get processingVideo(){return i()},set processingVideo(o){i(o),e.flush()},get i18n(){return x()},set i18n(o){x(o),e.flush()},get value(){return v()},set value(o){v(o),e.flush()},get show_download_button(){return h()},set show_download_button(o){h(o),e.flush()},get handle_clear(){return T()},set handle_clear(o){T(o),e.flush()},get has_change_history(){return M()},set has_change_history(o){M(o),e.flush()}};e.init();var b=$e(),w=e.first_child(b);let t;var n=e.child(w);{var f=o=>{var L=Ke(),X=e.child(L);Je(X,{get videoElement(){return a()},get dragStart(){return e.get(C)},set dragStart(P){e.set(C,P)},get dragEnd(){return e.get(B)},set dragEnd(P){e.set(B,P)},get trimmedDuration(){return e.get(p)},set trimmedDuration(P){e.set(p,P)},get loadingTimeline(){return e.get(A)},set loadingTimeline(P){e.set(A,P)},$$legacy:!0}),e.reset(L),e.append(o,L)};e.if(n,o=>{u()==="edit"&&o(f)})}var _=e.sibling(n,2),y=e.child(_);{var k=o=>{var L=Qe(),X=e.first_child(L);let P;var j=e.child(X,!0);e.reset(X);var R=e.sibling(X,2),c=e.child(R);let H;var q=e.sibling(c,2);let N;e.reset(R),e.template_effect(W=>{P=e.set_class(X,1,"svelte-1orxdv",null,P,{hidden:e.get(A)}),e.set_text(j,W),H=e.set_class(c,1,"text-button svelte-1orxdv",null,H,{hidden:e.get(A)}),N=e.set_class(q,1,"text-button svelte-1orxdv",null,N,{hidden:e.get(A)})},[()=>(e.deep_read_state(J),e.get(p),e.untrack(()=>J(e.get(p))))]),e.event("click",c,()=>{u(""),i(!0),Fe(e.get(S),e.get(C),e.get(B),a()).then(W=>{d()(W)}).then(()=>{i(!1)})}),e.event("click",q,I),e.append(o,L)},D=o=>{var L=Ye();e.append(o,L)};e.if(y,o=>{u()==="edit"&&e.get(p)!==null?o(k):o(D,!1)})}e.reset(_),e.reset(w);var g=e.sibling(w,2);{let o=e.derived_safe_equal(()=>(e.deep_read_state(h()),e.deep_read_state(v()),e.untrack(()=>h()?v()?.url:null)));Ue(g,{get i18n(){return x()},onclear:()=>T()(),get download(){return e.get(o)},children:(L,X)=>{var P=Ze(),j=e.first_child(P);{var R=q=>{{let N=e.derived_safe_equal(()=>i()||!M());le(q,{get Icon(){return ce},label:"Reset video to initial value",get disabled(){return e.get(N)},onclick:()=>{V()(),u("")}})}};e.if(j,q=>{m()&&u()===""&&q(R)})}var c=e.sibling(j,2);{var H=q=>{le(q,{get Icon(){return Ve},label:"Trim video to selection",get disabled(){return i()},onclick:I})};e.if(c,q=>{E()&&u()===""&&q(H)})}e.append(L,P)},$$slots:{default:!0}})}return e.template_effect(()=>t=e.set_class(w,1,"container svelte-1orxdv",null,t,{hidden:u()!=="edit"})),e.append(U,b),e.pop(O)}var tt=e.from_html('<input id="volume" class="volume-slider svelte-h4x5cd" type="range" min="0" max="1" step="0.01"/>');function rt(U,l){e.push(l,!1);let a=e.prop(l,"current_volume",12,1),m=e.prop(l,"show_volume_slider",12,!1),E=e.mutable_source();Z(()=>{u()});const u=()=>{let i=e.get(E);i&&(i.style.background=`linear-gradient(to right, white ${a()*100}%, rgba(255, 255, 255, 0.3) ${a()*100}%)`)};e.legacy_pre_effect(()=>e.deep_read_state(a()),()=>{a(),u()}),e.legacy_pre_effect_reset();var V={get current_volume(){return a()},set current_volume(i){a(i),e.flush()},get show_volume_slider(){return m()},set show_volume_slider(i){m(i),e.flush()}};e.init();var d=tt();return e.remove_input_defaults(d),e.bind_this(d,i=>e.set(E,i),()=>e.get(E)),e.template_effect(()=>e.set_value(d,a())),e.event("focusout",d,()=>m(!1)),e.event("input",d,i=>{i.target instanceof HTMLInputElement&&a(parseFloat(i.target.value))}),e.append(U,d),e.pop(V)}var lt=e.from_html('<track kind="captions" default/>'),at=e.from_html('<div role="button" tabindex="0" class="icon svelte-1k28h7x" aria-label="full-screen"><!></div>'),nt=e.from_html('<div class="wrap svelte-1k28h7x"><div><!></div> <div class="controls svelte-1k28h7x"><div class="inner svelte-1k28h7x"><span role="button" tabindex="0" class="icon svelte-1k28h7x" aria-label="play-pause-replay-button"><!></span> <span class="time svelte-1k28h7x"> </span>  <progress class="svelte-1k28h7x"></progress> <div class="volume-control-wrapper svelte-1k28h7x"><button class="icon volume-button svelte-1k28h7x" aria-label="Adjust volume"><!></button> <!></div> <!></div></div></div> <!>',1);function st(U,l){e.push(l,!1);let a=e.prop(l,"root",12,""),m=e.prop(l,"src",12),E=e.prop(l,"subtitle",12,null),u=e.prop(l,"mirror",12),V=e.prop(l,"autoplay",12),d=e.prop(l,"loop",12),i=e.prop(l,"label",12,"test"),x=e.prop(l,"interactive",12,!1),v=e.prop(l,"handle_change",12,()=>{}),h=e.prop(l,"handle_reset_value",12,()=>{}),T=e.prop(l,"upload",12),M=e.prop(l,"is_stream",12),S=e.prop(l,"i18n",12),p=e.prop(l,"show_download_button",12,!1),C=e.prop(l,"value",12,null),B=e.prop(l,"handle_clear",12,()=>{}),A=e.prop(l,"has_change_history",12,!1),I=e.prop(l,"playback_position",12,0);const O=de();let b=e.mutable_source(0),w=e.mutable_source(),t=e.mutable_source(!0),n=e.mutable_source(),f=e.mutable_source(!1),_=e.mutable_source(!1),y=e.mutable_source(1),k=e.mutable_source(!1);function D(r){if(!e.get(w))return;if(r.type==="click"){o(r);return}if(r.type!=="touchmove"&&!(r.buttons&1))return;const s=r.type==="touchmove"?r.touches[0].clientX:r.clientX,{left:F,right:z}=r.currentTarget.getBoundingClientRect();e.set(b,e.get(w)*(s-F)/(z-F))}async function g(){document.fullscreenElement!=e.get(n)&&(e.get(n).currentTime>0&&!e.get(n).paused&&!e.get(n).ended&&e.get(n).readyState>e.get(n).HAVE_CURRENT_DATA?e.get(n).pause():await e.get(n).play())}function o(r){const{left:s,right:F}=r.currentTarget.getBoundingClientRect();e.set(b,e.get(w)*(r.clientX-s)/(F-s))}function L(){O("stop"),O("end")}const X=async r=>{let s=new File([r],"video.mp4");const F=await Oe([s]);let z=(await T()(F,a()))?.filter(Boolean)[0];v()(z)};function P(){e.get(k)?document.exitFullscreen():e.get(n).requestFullscreen()}function j(){e.set(k,document.fullscreenElement===e.get(n)),e.get(n)&&e.mutate(n,e.get(n).controls=e.get(k))}let R=e.mutable_source(1),c=e.mutable_source();const H=.001;function q(){e.get(n)&&Math.abs(e.get(n).volume-e.get(R))>H&&(e.set(y,e.get(n).volume),e.set(R,e.get(n).volume))}Z(()=>(document.addEventListener("fullscreenchange",j),()=>{document.removeEventListener("fullscreenchange",j)})),ue(()=>{e.get(n)&&e.get(n).removeEventListener("volumechange",q)}),e.legacy_pre_effect(()=>(e.get(n),e.get(c)),()=>{e.get(n)&&e.get(n)!==e.get(c)&&(e.get(c)&&e.get(c).removeEventListener("volumechange",q),e.get(n).addEventListener("volumechange",q),e.set(c,e.get(n)))}),e.legacy_pre_effect(()=>e.get(b),()=>{e.set(b,e.get(b)||0)}),e.legacy_pre_effect(()=>e.get(w),()=>{e.set(w,e.get(w)||0)}),e.legacy_pre_effect(()=>e.get(b),()=>{I(e.get(b))}),e.legacy_pre_effect(()=>(e.deep_read_state(I()),e.get(b),e.get(n)),()=>{I()!==e.get(b)&&e.get(n)&&e.mutate(n,e.get(n).currentTime=I())}),e.legacy_pre_effect(()=>(e.get(n),e.get(k),e.get(y)),()=>{e.get(n)&&!e.get(k)&&(Math.abs(e.get(n).volume-e.get(y))>H&&(e.mutate(n,e.get(n).volume=e.get(y)),e.set(R,e.get(y))),e.mutate(n,e.get(n).controls=!1))}),e.legacy_pre_effect(()=>(e.get(n),e.get(k)),()=>{e.get(n)&&e.get(k)&&e.set(R,e.get(n).volume)}),e.legacy_pre_effect_reset();var N={get root(){return a()},set root(r){a(r),e.flush()},get src(){return m()},set src(r){m(r),e.flush()},get subtitle(){return E()},set subtitle(r){E(r),e.flush()},get mirror(){return u()},set mirror(r){u(r),e.flush()},get autoplay(){return V()},set autoplay(r){V(r),e.flush()},get loop(){return d()},set loop(r){d(r),e.flush()},get label(){return i()},set label(r){i(r),e.flush()},get interactive(){return x()},set interactive(r){x(r),e.flush()},get handle_change(){return v()},set handle_change(r){v(r),e.flush()},get handle_reset_value(){return h()},set handle_reset_value(r){h(r),e.flush()},get upload(){return T()},set upload(r){T(r),e.flush()},get is_stream(){return M()},set is_stream(r){M(r),e.flush()},get i18n(){return S()},set i18n(r){S(r),e.flush()},get show_download_button(){return p()},set show_download_button(r){p(r),e.flush()},get value(){return C()},set value(r){C(r),e.flush()},get handle_clear(){return B()},set handle_clear(r){B(r),e.flush()},get has_change_history(){return A()},set has_change_history(r){A(r),e.flush()},get playback_position(){return I()},set playback_position(r){I(r),e.flush()}};e.init();var W=nt(),ee=e.first_child(W),$=e.child(ee);let ae;var _e=e.child($);{let r=e.derived_safe_equal(()=>`${i()}-player`);He(_e,{get src(){return m()},preload:"auto",get autoplay(){return V()},get loop(){return d()},get is_stream(){return M()},get controls(){return e.get(k)},get"data-testid"(){return e.get(r)},get processingVideo(){return e.get(f)},get currentTime(){return e.get(b)},set currentTime(s){e.set(b,s)},get duration(){return e.get(w)},set duration(s){e.set(w,s)},get paused(){return e.get(t)},set paused(s){e.set(t,s)},get node(){return e.get(n)},set node(s){e.set(n,s)},$$events:{click:g,play(s){e.bubble_event.call(this,l,s)},pause(s){e.bubble_event.call(this,l,s)},error(s){e.bubble_event.call(this,l,s)},ended:L,loadstart(s){e.bubble_event.call(this,l,s)},loadeddata(s){e.bubble_event.call(this,l,s)},loadedmetadata(s){e.bubble_event.call(this,l,s)}},children:(s,F)=>{var z=lt();e.template_effect(()=>e.set_attribute(z,"src",E())),e.append(s,z)},$$slots:{default:!0},$$legacy:!0})}e.reset($);var ne=e.sibling($,2),se=e.child(ne),K=e.child(se),ge=e.child(K);{var ve=r=>{ce(r)},fe=r=>{var s=e.comment(),F=e.first_child(s);{var z=G=>{Pe(G)},xe=G=>{Me(G)};e.if(F,G=>{e.get(t)?G(z):G(xe,!1)},!0)}e.append(r,s)};e.if(ge,r=>{e.get(b)===e.get(w)?r(ve):r(fe,!1)})}e.reset(K);var te=e.sibling(K,2),me=e.child(te);e.reset(te);var Q=e.sibling(te,2),re=e.sibling(Q,2),Y=e.child(re);let oe;var he=e.child(Y);je(he,{get currentVolume(){return e.get(y)}}),e.reset(Y);var pe=e.sibling(Y,2);{var be=r=>{rt(r,{get current_volume(){return e.get(y)},set current_volume(s){e.set(y,s)},get show_volume_slider(){return e.get(_)},set show_volume_slider(s){e.set(_,s)},$$legacy:!0})};e.if(pe,r=>{e.get(_)&&r(be)})}e.reset(re);var ye=e.sibling(re,2);{var we=r=>{var s=at(),F=e.child(s);De(F),e.reset(s),e.event("click",s,P),e.event("keypress",s,P),e.append(r,s)};e.if(ye,r=>{e.get(_)||r(we)})}e.reset(se),e.reset(ne),e.reset(ee);var ke=e.sibling(ee,2);{var Ee=r=>{et(r,{get videoElement(){return e.get(n)},showRedo:!0,handle_trim_video:X,get handle_reset_value(){return h()},get value(){return C()},get i18n(){return S()},get show_download_button(){return p()},get handle_clear(){return B()},get has_change_history(){return A()},get processingVideo(){return e.get(f)},set processingVideo(s){e.set(f,s)},$$legacy:!0})};e.if(ke,r=>{x()&&r(Ee)})}return e.template_effect((r,s)=>{ae=e.set_class($,1,"mirror-wrap svelte-1k28h7x",null,ae,{mirror:u()}),e.set_text(me,`${r??""} / ${s??""}`),e.set_value(Q,e.get(b)/e.get(w)||0),oe=e.set_style(Y,"",oe,{color:e.get(_)?"var(--color-accent)":"white"})},[()=>(e.deep_read_state(J),e.get(b),e.untrack(()=>J(e.get(b)))),()=>(e.deep_read_state(J),e.get(w),e.untrack(()=>J(e.get(w))))]),e.event("click",K,g),e.event("keydown",K,g),e.event("mousemove",Q,D),e.event("touchmove",Q,e.preventDefault(D)),e.event("click",Q,e.preventDefault(e.stopPropagation(o))),e.event("click",Y,()=>e.set(_,!e.get(_))),e.append(U,W),e.pop(N)}var ot=e.from_html("<!> <!>",1),it=e.from_html('<!> <div data-testid="download-div"><!></div>',1),ut=e.from_html("<!> <!>",1);function dt(U,l){e.push(l,!1);let a=e.prop(l,"value",12,null),m=e.prop(l,"subtitle",12,null),E=e.prop(l,"label",12,void 0),u=e.prop(l,"show_label",12,!0),V=e.prop(l,"autoplay",12),d=e.prop(l,"buttons",12,null),i=e.prop(l,"on_custom_button_click",12,null),x=e.prop(l,"loop",12),v=e.prop(l,"i18n",12),h=e.prop(l,"upload",12),T=e.prop(l,"display_icon_button_wrapper_top_corner",12,!1),M=e.prop(l,"playback_position",12,0),S=null,p=null;const C=de();Te(async()=>{a()!==S&&m()!==p&&p!==null&&(S=a(),a(null),await Le(),a(S)),S=a(),p=m()}),e.legacy_pre_effect(()=>e.deep_read_state(a()),()=>{a()&&C("change",a())}),e.legacy_pre_effect_reset();var B={get value(){return a()},set value(t){a(t),e.flush()},get subtitle(){return m()},set subtitle(t){m(t),e.flush()},get label(){return E()},set label(t){E(t),e.flush()},get show_label(){return u()},set show_label(t){u(t),e.flush()},get autoplay(){return V()},set autoplay(t){V(t),e.flush()},get buttons(){return d()},set buttons(t){d(t),e.flush()},get on_custom_button_click(){return i()},set on_custom_button_click(t){i(t),e.flush()},get loop(){return x()},set loop(t){x(t),e.flush()},get i18n(){return v()},set i18n(t){v(t),e.flush()},get upload(){return h()},set upload(t){h(t),e.flush()},get display_icon_button_wrapper_top_corner(){return T()},set display_icon_button_wrapper_top_corner(t){T(t),e.flush()},get playback_position(){return M()},set playback_position(t){M(t),e.flush()}};e.init();var A=ut(),I=e.first_child(A);{let t=e.derived_safe_equal(()=>E()||"Video");Re(I,{get show_label(){return u()},get Icon(){return ie},get label(){return e.get(t)}})}var O=e.sibling(I,2);{var b=t=>{Se(t,{unpadded_box:!0,size:"large",children:(n,f)=>{ie(n)},$$slots:{default:!0}})},w=t=>{var n=it(),f=e.first_child(n);e.key(f,()=>(e.deep_read_state(a()),e.untrack(()=>a().url)),k=>{{let D=e.derived_safe_equal(()=>(e.deep_read_state(m()),e.untrack(()=>m()?.url)));st(k,{get src(){return e.deep_read_state(a()),e.untrack(()=>a().url)},get subtitle(){return e.get(D)},get is_stream(){return e.deep_read_state(a()),e.untrack(()=>a().is_stream)},get autoplay(){return V()},mirror:!1,get label(){return E()},get loop(){return x()},interactive:!1,get upload(){return h()},get i18n(){return v()},get playback_position(){return M()},set playback_position(g){M(g)},$$events:{play(g){e.bubble_event.call(this,l,g)},pause(g){e.bubble_event.call(this,l,g)},stop(g){e.bubble_event.call(this,l,g)},end(g){e.bubble_event.call(this,l,g)},loadedmetadata:()=>{C("load")}},$$legacy:!0})}});var _=e.sibling(f,2),y=e.child(_);{let k=e.derived_safe_equal(()=>d()??["download","share"]);Ie(y,{get display_top_corner(){return T()},get buttons(){return e.get(k)},get on_custom_button_click(){return i()},children:(D,g)=>{var o=ot(),L=e.first_child(o);{var X=R=>{{let c=e.derived_safe_equal(()=>(e.deep_read_state(a()),e.untrack(()=>a().is_stream?a().url?.replace("playlist.m3u8","playlist-file"):a().url))),H=e.derived_safe_equal(()=>(e.deep_read_state(a()),e.untrack(()=>a().orig_name||a().path)));qe(R,{get href(){return e.get(c)},get download(){return e.get(H)},children:(q,N)=>{le(q,{get Icon(){return Ae},label:"Download"})},$$slots:{default:!0}})}};e.if(L,R=>{e.deep_read_state(d()),e.untrack(()=>d()?.some(c=>typeof c=="string"&&c==="download"))&&R(X)})}var P=e.sibling(L,2);{var j=R=>{Ce(R,{get i18n(){return v()},get value(){return a()},formatter:async c=>c?await Be(c.data):"",$$events:{error(c){e.bubble_event.call(this,l,c)},share(c){e.bubble_event.call(this,l,c)}}})};e.if(P,R=>{e.deep_read_state(d()),e.untrack(()=>d()?.some(c=>typeof c=="string"&&c==="share"))&&R(j)})}e.append(D,o)},$$slots:{default:!0}})}e.reset(_),e.append(t,n)};e.if(O,t=>{e.deep_read_state(a()),e.untrack(()=>!a()||a().url===void 0)?t(b):t(w,!1)})}return e.append(U,A),e.pop(B)}const kt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));export{st as P,dt as V,kt as a};
