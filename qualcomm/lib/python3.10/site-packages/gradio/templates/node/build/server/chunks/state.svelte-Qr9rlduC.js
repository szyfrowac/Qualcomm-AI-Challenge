import './async-Djx13DAD.js';
import { g as attr_style, j as stringify, s as store_get, e as ensure_array_like, u as unsubscribe_stores, d as attr_class, f as html } from './index-B7gr0Dsc.js';
import { Z as Ze } from './index35-CkjPw9xb.js';
import { s as spring } from './spring-DyDQVd5U.js';
import { e as escape_html } from './escaping-CBnpiEl5.js';

function b(e){e.push('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6L8 10L12 6"></path></svg>');}function z(e){e.push('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"></path></svg>');}function M(e){e.push('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"></path></svg>');}function j(e){e.push('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>');}function C(e){e.push('<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg>');}function L(e){return Ze(e)}function q(e,o){e.component(t=>{let{type:i,messages:n=[],expanded:v=true}=o,r=0,p=n.length,a=n[0],h=i.charAt(0).toUpperCase()+i.slice(1),c=a?.duration!==null,u=c?`${a.duration}s`:"0s";if(t.push(`<div${attr_class(`toast-body ${stringify(i)}`,"svelte-irmu64")} role="status" aria-live="polite" data-testid="toast-body"${attr_style(`transform: translateX(${stringify(r)}px); opacity: ${stringify(1-Math.abs(r)/300)};`)}><div class="toast-header svelte-irmu64" role="button" tabindex="0"><div${attr_class(`toast-icon ${stringify(i)}`,"svelte-irmu64")}>`),i==="warning"?(t.push("<!--[-->"),C(t)):(t.push("<!--[!-->"),i==="info"?(t.push("<!--[-->"),M(t)):(t.push("<!--[!-->"),i==="success"?(t.push("<!--[-->"),j(t)):(t.push("<!--[!-->"),i==="error"?(t.push("<!--[-->"),z(t)):t.push("<!--[!-->"),t.push("<!--]-->")),t.push("<!--]-->")),t.push("<!--]-->")),t.push(`<!--]--></div> <div class="toast-title-row svelte-irmu64"><span${attr_class(`toast-title ${stringify(i)}`,"svelte-irmu64")}>${escape_html(h)} `),p>1?(t.push("<!--[-->"),t.push(`<span class="toast-count svelte-irmu64">(${escape_html(p)})</span>`)):t.push("<!--[!-->"),t.push(`<!--]--></span> <div${attr_class("chevron svelte-irmu64",void 0,{expanded:v,visible:p>0})}>`),b(t),t.push(`<!----></div></div> <button${attr_class(`toast-close ${stringify(i)}`,"svelte-irmu64")} type="button" aria-label="Close" data-testid="toast-close"><span aria-hidden="true">Ã—</span></button></div> `),v){t.push("<!--[-->"),t.push('<div class="toast-messages svelte-irmu64"><!--[-->');const g=ensure_array_like(n);for(let d=0,m=g.length;d<m;d++){let l=g[d];t.push(`<div${attr_class(`toast-message-item ${stringify(i)}`,"svelte-irmu64")}><div${attr_class(`toast-message-text ${stringify(i)}`,"svelte-irmu64")} data-testid="toast-text">${html(L(l.message))}</div></div> `),d<n.length-1?(t.push("<!--[-->"),t.push('<div class="toast-separator svelte-irmu64"></div>')):t.push("<!--[!-->"),t.push("<!--]-->");}t.push("<!--]--></div>");}else t.push("<!--[!-->");t.push("<!--]--> "),c?(t.push("<!--[-->"),t.push(`<div${attr_class(`timer ${stringify(i)}`,"svelte-irmu64")}${attr_style(`animation-duration: ${stringify(u)}`)}></div>`)):t.push("<!--[!-->"),t.push("<!--]--></div>");});}function D(e,o){e.component(t=>{var i;let{messages:n=[],on_close:v}=o;const r=spring(0,{stiffness:.4,damping:.5});let p=[];t.push(`<div class="toast-wrap svelte-1qhecvt"${attr_style(`--toast-top: ${stringify(store_get(i??={},"$top",r))}px;`)}><!--[-->`);const a=ensure_array_like(p);for(let h=0,c=a.length;h<c;h++){let u=a[h];t.push('<div class="toast-item svelte-1qhecvt">'),q(t,{type:u.type,messages:u.messages,expanded:u.expanded}),t.push("<!----></div>");}t.push("<!--]--></div>"),i&&unsubscribe_stores(i);});}class I{current={};fn_outputs={};fn_inputs={};pending_outputs=new Map;fn_status={};show_progress={};register(o,t,i,n){this.fn_outputs[o]=t,this.fn_inputs[o]=i,this.show_progress[o]=n;}clear(o){o in this.current&&(this.current[o]={});}update(o){this.resolve_args(o).forEach(({id:i,queue_position:n,queue_size:v,eta:r,status:p,message:a,progress:h,stream_state:c,time_limit:u,type:g})=>{this.current[i]={queue:o.queue||false,queue_size:v,queue_position:n,eta:r,stream_state:c,message:a,progress:h||void 0,status:p,fn_index:o.fn_index,time_limit:u,type:g,show_progress:this.show_progress[o.fn_index]};});}set_status(o,t){this.current[o].status=t;}resolve_args(o){const{fn_index:t,status:i,size:n=void 0,position:v=null,eta:r=null,message:p=null,stream_state:a=null,time_limit:h=null,progress_data:c=null}=o,u=this.fn_outputs[t],g=this.fn_status[t],d=this.fn_inputs[t];return u.concat(d).map(l=>{let f;const w=this.pending_outputs.get(l)||0;if(g==="pending"&&i!=="pending"){let _=w-1;this.pending_outputs.set(l,_<0?0:_),f=_>0?"pending":i;}else g==="pending"&&i==="pending"?f="pending":g!=="pending"&&i==="pending"?(f="pending",this.pending_outputs.set(l,w+1)):f=i;const k=d.includes(l)&&a?"input":u.includes(l)?"output":"skip";return {id:l,queue_position:v,queue_size:n,eta:r,status:f,message:p,progress:c,stream_state:a,time_limit:h,type:k}}).filter(l=>l.type!=="skip")}}

export { D, I };
//# sourceMappingURL=state.svelte-Qr9rlduC.js.map
